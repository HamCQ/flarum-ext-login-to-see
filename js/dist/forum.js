(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var o=t.n(e);const r=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/CommentPost"];var a=t.n(i);const s=flarum.core.compat["forum/components/LoginModal"];var n=t.n(s);o().initializers.add("hamcq/login-to-see",function(){(0,r.override)(a().prototype,"bodyItems",function(t){var e,r=t();if(o().session.user)return r;if(r.get("content")&&!this.isEditing()){var i=(e=this.attrs.post.contentHtml())?e.replace(/<img([^>]*)\ssrc="([^"]+)"([^>]*)>/gi,function(t,e,o,r){return o.startsWith("data:image/svg+xml")?t:"<img"+e+" src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 400'%3E%3Cdefs%3E%3CclipPath id='round'%3E%3Crect width='600' height='400' rx='4' ry='4'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg clip-path='url(%23round)'%3E%3Crect width='600' height='400' fill='%23f0f0f0'/%3E%3C/g%3E%3Crect x='175' y='165' width='250' height='70' rx='12' fill='%23ffffff' fill-opacity='0.6' stroke='%23e0e0e0' stroke-width='1'/%3E%3Ctext x='300' y='193' font-family='system-ui,-apple-system,sans-serif' font-size='16' fill='%23666' text-anchor='middle' font-weight='500'%3EðŸ”’ è¯·ç™»å½•åŽæŸ¥çœ‹å›¾ç‰‡%3C/text%3E%3Ctext x='300' y='215' font-family='system-ui,-apple-system,sans-serif' font-size='12' fill='%23999' text-anchor='middle'%3ELogin to view image%3C/text%3E%3C/svg%3E\" data-original-src=\""+o+'" class="login-required-image" style="cursor:pointer;border-radius:4px;max-width:400px;max-height:267px;width:auto;height:auto;display:block;margin:0 auto;" title="ðŸ”’ è¯·ç™»å½•åŽæŸ¥çœ‹å›¾ç‰‡"'+r+">"}):e;r.replace("content",m.trust(i))}return r}),(0,r.extend)(a().prototype,"oncreate",function(t){if(!o().session.user&&t&&t.dom){var e=t.dom.querySelector(".Post-body");e&&e.querySelectorAll(".login-required-image").forEach(function(t){t.dataset.listenerAdded||(t.dataset.listenerAdded="true",t.addEventListener("click",function(t){t.preventDefault(),o().modal.show(n())}))})}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map